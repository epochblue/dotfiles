# history
PROMPT_COMMAND="history -a; history -n"
HISTCONTROL=ignoredups
HISTIGNORE='exit:ls:bg:fg:history:clear'
HISTTIMEFORMAT='%F %T '
HISTSIZE=1000
shopt -s histappend
shopt -s cmdhist

# virtualenv
export VIRTUAL_ENV_DISABLE_PROMPT=1

set_active_venv() {
    export ACTIVE_VENV=""
    if [ "$VIRTUAL_ENV" != "" ]; then
        export ACTIVE_VENV="(`basename \"$VIRTUAL_ENV\"`)"
    fi
}

# per-month emoji
MONTH=$(date +"%m")
case $MONTH in
    01)
        SYMBOL='üéâ'
        ;;
    02)
        SYMBOL='‚ù§Ô∏è'
        ;;
    03)
        SYMBOL='üçÄ'
        ;;
    04)
        SYMBOL='üê∞'
        ;;
    05)
        SYMBOL='‚òÄÔ∏è'
        ;;
    06)
        SYMBOL='üíç'
        ;;
    07)
        SYMBOL='üéá'
        ;;
    08)
        SYMBOL='üéÇ'
        ;;
    09)
        SYMBOL='üçÇ'
        ;;
    10)
        SYMBOL='üëª'
        ;;
    11)
        SYMBOL='üçó'
        ;;
    12)
        SYMBOL='üéÑ'
        ;;
    *)
        SYMBOL='‚òïÔ∏è'
        ;;
esac

# make the git prompt smarter
GIT_PS1_SHOWDIRTYSTATE=1
GIT_PS1_SHOWUNTRACKEDFILES=1

set_prompt() {
    set_active_venv
    PS1="${SYMBOL} ${YLW}${ACTIVE_VENV} ${WHT}\w ${GRN}$(__git_ps1 "(%s)")${WHT}${CLR} \$ "
}

PROMPT_COMMAND=set_prompt

